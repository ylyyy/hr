@model Entity.major_change

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../../css/table.css"
          type="text/css">

    <script type="text/javascript" src="../../javascript/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function () {
            $.post("/position/position_registerYi", "", function (data) {
                var datas = eval("(" + data + ")");
                var $first = $("#firstKindId");
                for (var i = 0; i < datas.length; i++) {
                    if ("@Model.new_first_kind_id" == datas[i].first_kind_id) {
                        var $op = $("<option value='" + datas[i].first_kind_id + "' selected=\"selected\">" + datas[i].first_kind_name + "</option>");
                    } else {
                        var $op = $("<option value='" + datas[i].first_kind_id + "'>" + datas[i].first_kind_name + "</option>");
                    }
                    $first.append($op);
                }
            })
            $("#firstKindId").on("change", function () {
                var first_kind_id = $("#firstKindId").val();
                $("#secondKindId option:gt(0)").remove();
                $("#thirdKindId option:gt(0)").remove();
                $.post("/position/position_registerEr", { "first_kind_id": first_kind_id }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $second = $("#secondKindId");
                    for (var i = 0; i < datas.length; i++) {
                        var $op = $("<option value='" + datas[i].second_kind_id + "'>" + datas[i].second_kind_name + "</option>");
                        $second.append($op);
                    }
                });
            });
            $("#secondKindId").on("change", function () {
                var second_kind_id = $("#secondKindId").val();
                $("#thirdKindId option:gt(0)").remove();
                $.post("/position/position_registerSan", { "second_kind_id": second_kind_id }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $third = $("#thirdKindId");
                    for (var i = 0; i < datas.length; i++) {
                        var $op = $("<option value='" + datas[i].third_kind_id + "'>" + datas[i].third_kind_name + "</option>");
                        $third.append($op);
                    }
                });
            })
            $.post("/position/position_registerZW", "", function (data) {
                var datas = eval("(" + data + ")");
                var $majorkind = $("#newMajorKindId");
                for (var i = 0; i < datas.length; i++) {
                    if ("@Model.new_major_kind_id" == datas[i].major_kind_id) {
                        var $op = $("<option value='" + datas[i].major_kind_id + "' selected>" + datas[i].major_kind_name + "</option>");
                    } else {
                        var $op = $("<option value='" + datas[i].major_kind_id + "'>" + datas[i].major_kind_name + "</option>");
                    }
                    $majorkind.append($op);
                }
            })
            $("#newMajorKindId").bind("change", function () {
                var major_kind_id = $("#newMajorKindId").val();
                $("#newMajorId option:gt(0)").remove();
                $.post("/position/position_registerZWFL", { "major_kind_id": major_kind_id }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $major = $("#newMajorId");
                    for (var i = 0; i < datas.length; i++) {
                        var $op = $("<option value='" + datas[i].major_id + "'>" + datas[i].major_name + "</option>");
                        $major.append($op);
                    }
                });
            });
            $.post("/transfer/biaozhuen", "", function (data) {
                var datas = eval("(" + data + ")");
                var $newSalaryStandardId = $("#newSalaryStandardId");
                for (var i = 0; i < datas.length; i++) {
                    if ("@Model.new_salary_standard_id" == datas[i].standard_id) {
                        var $op = $("<option value='" + datas[i].standard_id + "' selected='selected'>" + datas[i].standard_name + "</option>");
                    } else {
                        var $op = $("<option value='" + datas[i].standard_id + "'>" + datas[i].standard_name + "</option>");
                    }
                    $newSalaryStandardId.append($op);
                }
            });

            $("#newSalaryStandardId").change(function () {
                var standard_id = $("#newSalaryStandardId").val();
                $.post("/transfer/zonge", { "standard_id": standard_id }, function (data) {
                    var datas = eval("(" + data + ")");
                    if (datas == null) {
                        $("#newSalarySum").val("0.00");
                    } else {
                        $("#newSalarySum").val(datas.salary_sum);
                    }
                })
            })

            if ("@Model.new_third_kind_id" != "0") {
                $("#thirdKindId option:gt(0)").remove();
                $.post("/position/position_registerSan", { "second_kind_id": "@Model.new_second_kind_id" }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $third = $("#thirdKindId");
                    for (var i = 0; i < datas.length; i++) {
                        if ("@Model.new_third_kind_id" == datas[i].third_kind_id) {
                            var $op = $("<option value='" + datas[i].third_kind_id + "' selected>" + datas[i].third_kind_name + "</option>");
                        } else {
                            var $op = $("<option value='" + datas[i].third_kind_id + "'>" + datas[i].third_kind_name + "</option>");
                        }
                        $third.append($op);
                    }
                });

            }
            if("@Model.new_second_kind_id"!="0"){
                $("#secondKindId option:gt(0)").remove();
                $.post("/position/position_registerEr", { "first_kind_id": "@Model.new_first_kind_id" }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $second = $("#secondKindId");
                    for (var i = 0; i < datas.length; i++) {
                        if ("@Model.new_second_kind_id" == datas[i].second_kind_id) {
                            var $op = $("<option value='" + datas[i].second_kind_id + "' selected=\"selected\">" + datas[i].second_kind_name + "</option>");
                        } else {
                            var $op = $("<option value='" + datas[i].second_kind_id + "'>" + datas[i].second_kind_name + "</option>");
                        }
                        $second.append($op);
                    }
                });
            }
            if ("@Model.new_major_id" != "0")
            {
                $("#newMajorId option:gt(0)").remove();
                $.post("/position/position_registerZWFL", { "major_kind_id": "@Model.new_major_id" }, function (data) {
                    var datas = eval("(" + data + ")");
                    var $major = $("#newMajorId");
                    for (var i = 0; i < datas.length; i++) {
                        if ("@Model.new_major_id" == datas[i].major_id) {
                            var $op = $("<option value='" + datas[i].major_id + "' selected=\"selected\">" + datas[i].major_name + "</option>");
                        } else {
                            var $op = $("<option value='" + datas[i].major_id + "'>" + datas[i].major_name + "</option>");
                        }
                        $major.append($op);
                    }
                });
            }
        });
    </script>
    <script type="text/javascript">
        function time() {
 					var tdate=document.getElementById("Tdate");
 					var d=new Date();
 					var y=d.getFullYear();
 					var moth=d.getMonth()+1;
 					var date=d.getDate();
 					var h=d.getHours();
 					var m=d.getMinutes();
 					var s=d.getSeconds();
					var hh=20-1-h;
					var mm=60-1-m;
					var ss=60-s;
					if(hh>0){
							mm=mm+60*hh;
					}
 					if(moth<10){
 							moth="0"+moth;
 					}
 					if(date<10){
 							date="0"+date;
 					}
 					if(h<10){
 							h="0"+h;
 					}
 					if(m<10){
 							m="0"+m;
 					}
 					if(s<10){
 							s="0"+s;
 					}
 					if(mm<10){
 							mm="0"+mm;
 					}
 					if(ss<10){
 							ss="0"+ss;
 					}

 					tdate.value=y+"-"+moth+"-"+date+" "+h+":"+m+":"+s;

 				}
        function load() {
            @*if(@Model.new_second_kind_id=="0"){
                document.getElementById("secondKindId").value='0';
            }
 				  document.getElementById("firstKindId").value='@Model.new_first_kind_id';
 				  document.getElementById("newMajorKindId").value='@Model.new_major_kind_id';
 				  document.getElementById("newMajorId").value='@Model.new_major_id';
 				  document.getElementById("newSalaryStandardId").value='@Model.new_salary_standard_id';*@
            time();
 				 }
				window.onload=load;
				var out=window.setInterval(time, 1000);
    </script>
</head>
<body>
    <form method="post" action="/transfer/checkUpdate">
        <table width="100%">
            <tr>
                <td>
                    <font color="black">您正在做的业务是:人力资源--调动管理--调动审核</font>
                </td>
            </tr>
            <tr>
                <td align="right">
                    <input type="radio" name="checkStatus" value="true">通过
                    <input type="radio" name="checkStatus" value="false">不通过
                    <input type="button" value="确认" class="BUTTON_STYLE1" onclick="check()">
                    <input type="button" class="BUTTON_STYLE1" onclick="javascript:window.history.back();" value="返回">
                    <SCRIPT type="text/javascript">
					function check(){
					    var rs = document.getElementsByName("checkStatus");
						 if(rs[0].checked==false&&rs[1].checked==false){
						 alert("请选择通过或者不通过！");
						 }else{
						 function mySubmit(){
						if(document.getElementById("firstKindId").value=='0'){
							alert("请选择新一级结构！");
								return ;
						}
						if(document.getElementById("newMajorKindId").value=='0'){
							alert("请选择新职位分类！");
								return ;
						}
						if(document.getElementById("newMajorId").value=='0'){
							alert("请选择新职位名称！");
								return ;
						}
						if(document.getElementById("newSalaryStandardId").value=='0'){
							alert("请选择新薪酬标准！");
								return ;
						}

						document.forms[0].submit();

						}
						 	document.forms[0].submit();
						 }
					}
                    </SCRIPT>
                </td>
            </tr>
        </table>
        <table width="100%" border="1" cellpadding=0 cellspacing=1
               bordercolorlight=#848284 bordercolordark=#eeeeee
               class="TABLE_STYLE1">
            <tr height="21">
                <td class="TD_STYLE1" width="8%">
                    档案编号
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="human_id" readonly="readonly"
                           value="@Model.human_id" class="INPUT_STYLE2">
                    <input type="hidden" name="mch_id" value="@Model.mch_id">

                </td>
                <td class="TD_STYLE1" width="8%">
                    姓名
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="human_name"
                           value="@Model.human_name" readonly="readonly"
                           class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>
            <tr>

                <td class="TD_STYLE1" width="8%">
                    原一级机构
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="first_kind_name"
                           value="@Model.first_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="first_kind_id" value="@Model.first_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%">
                    原二级机构
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="second_kind_name"
                           value="@Model.second_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="second_kind_id" value="@Model.second_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%">
                    原三级机构
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="third_kind_name"
                           value="@Model.third_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="third_kind_id" value="@Model.third_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>

            <tr>
                <td class="TD_STYLE1">
                    原职位分类
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="major_kind_name"
                           value="@Model.major_kind_name" readonly="readonly"
                           value="" class="INPUT_STYLE2">
                    <input type="hidden" name="major_kind_id" value="@Model.major_kind_id">
                </td>
                <td class="TD_STYLE1" width="12%">
                    原职位名称
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="major_name"
                           value="@Model.major_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="major_id" value="@Model.major_id">
                </td>
                <td class="TD_STYLE1">
                    原薪酬标准
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="salary_standard_name"
                           value="@Model.salary_standard_name"
                           readonly="readonly" class="INPUT_STYLE2">
                    <input type="hidden" name="salary_standard_id" value="@Model.salary_standard_id">
                </td>
                <td class="TD_STYLE1">
                    原薪酬总额
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="salary_sum"
                           value="@Model.salary_sum" readonly="readonly"
                           class="INPUT_STYLE2">
                </td>

            </tr>
            <tr>
                <td class="TD_STYLE1">
                    新一级机构名称
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_first_kind_id" id="firstKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                    </select>
                </td>
                <td class="TD_STYLE1" width="12%">
                    新二级机构名称
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_second_kind_id" id="secondKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                    </select>
                </td>
                <td class="TD_STYLE1" width="12%">
                    新三级机构名称
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_third_kind_id" id="thirdKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>

                    </select>
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    新职位分类
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_major_kind_id" id="newMajorKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                    </select>
                </td>
                <td class="TD_STYLE1" width="12%">
                    新职位名称
                </td>
                <td class="TD_STYLE2">
                    <select name="new_major_id" id="newMajorId" class="INPUT_STYLE2" size="1">
                        <option value="0">-----请选择-----</option>
                    </select>
                </td>
                <td class="TD_STYLE1">
                    新薪酬标准
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_salary_standard_id" id="newSalaryStandardId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                    </select>
                </td>
                <td class="TD_STYLE1">
                    新薪酬总额
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="new_salary_sum" id="newSalarySum" readonly="readonly"
                           value="@Model.new_salary_sum" class="INPUT_STYLE2">
                </td>
            </tr>

            <tr>

                <td class="TD_STYLE1">
                    登记人
                </td>
                <td class="TD_STYLE2">
                    @{ users user = Session["user"] as users;}
                    <input type="text" name="register" value="@user.u_true_name" readonly="readonly" class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    登记时间
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="regist_time" readonly="readonly" value="@Model.regist_time" class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    复核人
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="checker" value="@user.u_true_name" readonly="readonly" class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    复核时间
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="check_time" id="Tdate" class="INPUT_STYLE2">
                </td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    调动原因
                </td>
                <td colspan="7" class="TD_STYLE2">
                    <textarea name="change_reason" rows="6" readonly="readonly" class="TEXTAREA_STYLE1">@Model.change_reason</textarea>
                </td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    复合通过意见
                </td>
                <td colspan="7" class="TD_STYLE2"><textarea name="check_reason" rows="6" class="TEXTAREA_STYLE1"></textarea>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>
